{% extends "datacollection/login_base.html" %}

{% block title %}Cistrome Paper Collection{% endblock %}
{% block include %}
<link href="{% url static_url %}css/home.css" rel="stylesheet" type="text/css" title="home"/>
<script src="{% url static_url %}js/prototype.js" type="text/javascript"></script>
<script src="{% url static_url %}js/scriptaculous/scriptaculous.js" type="text/javascript"></script>
<script src="{% url static_url %}js/settings.js" type="text/javascript"></script>
<script src="{% url static_url %}js/Models.js" type="text/javascript"></script>
<script src="{% url static_url %}js/Utils.js" type="text/javascript"></script>
<script src="{% url static_url %}js/home.js" type="text/javascript"></script>
{% endblock %}

{% block onload %}
onload="init();"
{% endblock %}

{% block content %}
   <nav id="tabNav">
     <header class="tabHeader" id="factorsTab">Factors View</header>
     <header class="tabHeader" id="cellsTab">Cells View</header>
     <header class="tabHeader" id="papersTab">Papers View</header>
   </nav>
   <section id="factorsView">
     <section id="factorsForm" class="factorsSection"> <!--INPUT FORM-->
       <div class="step1"> <!--step 1-->
	 <p>
	 <strong>Select the factors of interest:</strong> <br/>
	 <span>(multiple selection allowed, max 10)</span><br/>
	 <br/>
	 <span class="note">NOTE: These are the official gene symbol as found in the <a href="http://www.ncbi.nlm.nih.gov/gene/" target="_blank">EntrezGene</a> database.</span><br/>
	 </p>
	 <select multiple="True" id="factorsSelect">
	     <!--NOTE: 0 = ALL FACTORS-->
	     <!--<option value="0" selected="True">All [BEWARE: a huge table may result!]</option>-->
	     {% for f in factors %}
	     <option value="{{f.id}}" class="{% cycle 'row' 'altrow' %}">{{f.name}}</option>
	     {% endfor %}
	   </select>
       </div>
       <div class="step2"> <!--step 2-->
	   <input type="button" id="drawBtn" class="drawBtn" value="Draw Table"/>
       </div>
     </section>
     <hr/>
     <section id="factorsTable"  class="factorsTable">
       <h3>Select Factors and Click 'Draw Table'</h3>
     </section>
     <hr/>
     <section id="factorInfo" class="factorInfo">
     </section>
   </section>

   <section id="papersView">
      <!--inspired by www.factorbook.org -->
      <section class="collapsable_box"> 
        <header class="collapsable_box_header">Papers:<span id="searchSpan"><input type="text" id="search" value=""></input><input type="button" value="Search" id="searchBtn"/></span><span id="results_toggler" class="toggle">-</span>
	</header>
	<section class="collapsable_box_content" id="results_wrapper">
	      <section id="results"> </section> 
	</section>
      </section>

      <section class="collapsable_box"> 
	<header class="collapsable_box_header">Info:<span id="paper_info_toggler" class="toggle">-</span></header> 
	<section class="collapsable_box_content" id="paper_info_wrapper">
	      <section id="paper_info"> </section> 
	</section>
      </section>

      <section class="collapsable_box" style="visibility:hidden"> 
	<header class="collapsable_box_header">Datasets:<span id="datasets_toggler" class="toggle">-</span></header> 
	<section class="collapsable_box_content" id="datasets_wrapper"> 
	      <section id="datasets"> </section> 
	</section>
      </section>

      <section class="collapsable_box" id="sample_section" style="visibility:hidden"> 
	<header class="collapsable_box_header">Samples:<span id="samples_toggler" class="toggle">-</span></header> 
	<section class="collapsable_box_content" id="samples_wrapper"> 
	      <section id="samples"> </section> 
	</section>
      </section>
   </section>
   
   <section id="cellsView">
     <section id="cellsForm" class="factorsSection"> 
       <div class="step1"> 
	 <p>
	 <strong>Select the cells of interest:</strong><br/>
	 <span>(max 1)</span><br/>
	 </p>
	 <select multiple="true" id="cellsSelect">
	     {% for mod, c in cells %}
	     <option value="{{mod}},{{c.id}}" class="{% cycle 'row' 'altrow' %}">{{c.name}}</option>
	     {% endfor %}
	 </select>
       </div>
       <div class="step2">
	   <input type="button" id="cellsDrawBtn" class="drawBtn" value="Draw Table" />
       </div>
     </section>
     <hr/>
     <section id="cellsFactorsTable"  class="factorsTable">
       <h3>Select Cells and Click 'Draw Table'</h3>
     </section>
     <hr/>
     <section id="cellsFactorInfo" class="factorInfo">
     </section>
   </section>
{% endblock %}

{% block sidebar %}
      <!--<nav>
         <h3>Cistrome DC:</h3>
         <ul>
	   <li><span class="fakeLink" id="recent_papers">Latest Papers</span></li>
	    <li><span class="fakeLink" id="all_papers">Browse All Papers</span></li> -->
	    <!--<li><span id="top_papers">Top Rated Papers</span></li>-->
	    <!--<li><span id="downloaded_papers">Most Downloaded</span></li>-->
	 <!--</ul>
      </nav>-->
      <nav>
	 <!--<h3>Help:</h3>-->
	 <ul>
	    <!--<li><span>About Cistrome DC</span></li>-->
	    <!--<li><span>FAQ</span></li>-->
	    <li>Home</li>
	    <li><a href="{% url paper_submission %}">Submit a Paper</a></li>
	    <li><a href="{% url dcstats %}">Collection Stats</a></li>
	 </ul>
      </nav>
      {% if user.is_staff %}
      <nav>
         <h3>Admin:</h3>
         <ul>
	    <li><a href="{% url report %}">Weekly Report</a></li>
	    <li><a href="{% url weekly_papers %}">Weekly Papers</a></li>
	    <li><a href="{% url weekly_datasets %}">Weekly Datasets</a></li>
	    <li><a href="{% url admin %}">Admin</a></li>
	    <li><a href="{% url teams %}">Teams</a></li>
	    <li><a href="{% url submissions_admin %}">Paper Submissions</a></li>
	    <li><a href="{% url admin_help %}">Help</a></li>
	 </ul>
      </nav>
      {% endif %}
{% endblock %}
